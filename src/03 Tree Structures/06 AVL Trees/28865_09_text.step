{"block": {"name": "text", "text": "<p>As you may have noticed in the previous step, the simple AVL rotation we learned fails to fix the balance of the tree:</p><p><img alt=\"\" src=\"https://ucarecdn.com/6b1058ad-6c61-4a6c-b88b-271389cbda81/\"></p><p>To combat this problem, we will introduce the\u00a0<b>double rotation</b>, which is simply a series of two AVL rotations that will be able to fix the tree's balance. The issue comes about when we have a \"kink\" in the shape with respect to what exactly went out of balance. Contrast the above tree with the trees on the previous step, which were also out of balance, but which looked like a \"straight line\" as opposed to a \"kink\".</p><p>The solution to our problem (a double rotation) is actually quite intuitive: we have a method that works on nodes that are in a straight line (a single rotation), so our solution to kinks is to first perform one rotation to\u00a0<i>transform</i> our problematic kink\u00a0<i>into</i> the straight line case, and then we can simply perform another rotation to solve the straight line case.</p><p>Below is the correct way to rebalance this tree (where 2 is the node we inserted into the tree):</p><p><img alt=\"\" src=\"https://ucarecdn.com/5fdc3547-c65f-4750-8797-97a469397be5/\"></p><p>Formally, we can describe a double rotation using the following pseudocode, which relies on the previous AVL rotation pseudocode (<i>a</i> denotes the node at the top of the kink):</p><p></p><pre><code class=\"no-highlight\"><b>DoubleAVLLeftKink(<i>a</i>): // Perform AVL rotation on a left kink: &lt;</b>\n    <i>b</i> = left child of <i>a</i>\n    <i>c</i> = right child of <i>b</i>\n    AVLLeft(<i>b</i>)\n    AVLRight(<i>a</i>)\n\n<b>DoubleAVLRightKink(<i>a</i>): // Perform AVL rotation on a right kink: &gt;</b>\n    <i>b</i> = right child of <i>a</i>\n    <i>c</i> = left child of <i>b</i>\n    AVLRight(<i>b</i>)\n    AVLLeft(<i>a</i>\ufeff)</code></pre><p></p>", "video": null, "animation": null, "options": {}, "subtitle_files": [], "source": null, "subtitles": {}, "tests_archive": null, "feedback_correct": "", "feedback_wrong": ""}, "id": "120849", "time": "2018-03-04T14:38:21.023351"}